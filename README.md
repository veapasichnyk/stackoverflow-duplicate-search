# StackOverflow: –í–∏—è–≤–ª–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ —Ç–∞ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫

–¶–µ–π –ø—Ä–æ—î–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î **end-to-end ML-—Ä—ñ—à–µ–Ω–Ω—è** –¥–ª—è:
- –≤–∏—è–≤–ª–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –ø–∏—Ç–∞–Ω—å StackOverflow (supervised learning),
- —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É –∑–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –ø–∏—Ç–∞–Ω—å,
- —Ç–∞ –ø–æ–±—É–¥–æ–≤–∏ ML-—Å–∏—Å—Ç–µ–º–∏ –∑ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ production-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏.

–ü—Ä–æ—î–∫—Ç –æ—Ö–æ–ø–ª—é—î –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ä–æ–±–æ—Ç–∏ –∑ –¥–∞–Ω–∏–º–∏ ‚Äî –≤—ñ–¥ EDA –¥–æ –º–æ–¥–µ–ª–µ–π, –µ–º–±–µ–¥–¥–∏–Ω–≥—ñ–≤ —ñ –≤–µ–∫—Ç–æ—Ä–Ω–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

---

##  –ú–µ—Ç–∞ –ø—Ä–æ—î–∫—Ç—É

- –ü–æ–±—É–¥—É–≤–∞—Ç–∏ **supervised ML-–º–æ–¥–µ–ª—å** –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –ø–∏—Ç–∞–Ω—å.
- –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ **–∫–ª–∞—Å–∏—á–Ω—ñ ML-–ø—ñ–¥—Ö–æ–¥–∏** —Ç–∞ **—Å–µ–º–∞–Ω—Ç–∏—á–Ω—ñ –µ–º–±–µ–¥–¥–∏–Ω–≥–∏**.
- –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **—Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é SBERT —Ç–∞ Qdrant.
- –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É–≤–∞—Ç–∏ **–º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥** –¥–æ ML-—Å–∏—Å—Ç–µ–º.
- –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ trade-offs –º—ñ–∂ TF-IDF, tree-based –º–æ–¥–µ–ª—è–º–∏ —Ç–∞ embeddings.

---

##  –î–∞–Ω—ñ

- **–î–∂–µ—Ä–µ–ª–æ:** StackOverflow question pairs  
  (Hugging Face: `sentence-transformers/stackexchange-duplicates`)
- **–†–æ–∑–º—ñ—Ä –¥–∞—Ç–∞—Å–µ—Ç—É:**
  - 304 525 –ø–æ–∑–∏—Ç–∏–≤–Ω–∏—Ö –ø–∞—Ä (–¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤)
  - 304 525 –Ω–µ–≥–∞—Ç–∏–≤–Ω–∏—Ö –ø–∞—Ä (–∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —á–µ—Ä–µ–∑ negative sampling)
- **–§—ñ–Ω–∞–ª—å–Ω–∏–π supervised –¥–∞—Ç–∞—Å–µ—Ç:** ‚âà 609 000 –ø–∞—Ä

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–ª–æ–Ω–∫–∏
- `title1`, `title2` ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø–∏—Ç–∞–Ω—å
- `label` ‚Äî `1` (duplicate), `0` (not duplicate)

---

##  –ù–æ—É—Ç–±—É–∫–∏

| –ù–æ—É—Ç–±—É–∫ | –û–ø–∏—Å |
|------|------|
| `01_eda.ipynb` | –î–æ—Å–ª—ñ–¥–Ω–∏—Ü—å–∫–∏–π –∞–Ω–∞–ª—ñ–∑ –¥–∞–Ω–∏—Ö, –¥–æ–≤–∂–∏–Ω–∏ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤, –ø—Ä–∏–∫–ª–∞–¥–∏, —ñ–Ω—Å–∞–π—Ç–∏ |
| `02_supervised_models.ipynb` | TF-IDF + Logistic Regression (baseline), XGBoost, LightGBM |
| `03_semantic_search_demo.ipynb` | –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ –∑ SBERT |

---

##  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```text
stack_overflow_duplicate_search/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ processed/
‚îÇ       ‚îú‚îÄ‚îÄ pairs.parquet               # –ø–æ—á–∞—Ç–∫–æ–≤—ñ –ø–∞—Ä–∏-–¥—É–±–ª—ñ–∫–∞—Ç–∏
‚îÇ       ‚îú‚îÄ‚îÄ pairs_with_neg.parquet      # –ø–æ–∑–∏—Ç–∏–≤–Ω—ñ + –Ω–µ–≥–∞—Ç–∏–≤–Ω—ñ –ø–∞—Ä–∏
‚îÇ       ‚îú‚îÄ‚îÄ unique_titles.parquet       # —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ corpus_vectors.npz          # SBERT-–µ–º–±–µ–¥–¥–∏–Ω–≥–∏ (384)
‚îÇ       ‚îî‚îÄ‚îÄ corpus_payload.parquet      # title + source_id
‚îÇ
‚îú‚îÄ‚îÄ notebooks/
‚îÇ   ‚îú‚îÄ‚îÄ 01_eda.ipynb
‚îÇ   ‚îú‚îÄ‚îÄ 02_supervised_models.ipynb
‚îÇ   ‚îî‚îÄ‚îÄ 03_semantic_search_demo.ipynb
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ build_corpus.py                 # —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –∫–æ—Ä–ø—É—Å—É –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ embed_and_upsert.py             # –µ–º–±–µ–¥–¥–∏–Ω–≥ + –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ Qdrant
‚îÇ   ‚îú‚îÄ‚îÄ upsert_preembedded.py           # –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥–æ—Ç–æ–≤–∏—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ search_titles.py                # CLI-–¥–µ–º–æ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É
‚îÇ   ‚îî‚îÄ‚îÄ smoke_test.py                   # –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ Qdrant
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ api/                            # FastAPI gateway
‚îÇ   ‚îú‚îÄ‚îÄ embedder/                       # SBERT / OpenAI embeddings
‚îÇ   ‚îî‚îÄ‚îÄ classifier/                     # –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ architecture.mmd                # —Å—Ö–µ–º–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ —Å–∏—Å—Ç–µ–º–∏
```
---

##  Supervised-–∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤

### üîπ Baseline

**TF-IDF + Logistic Regression**

- **Accuracy:** ‚âà **0.50**
- –ú–æ–¥–µ–ª—å –ø–µ—Ä–µ–¥–±–∞—á–∞—î –ª–∏—à–µ **majority class**

 **–í–∏—Å–Ω–æ–≤–æ–∫:**  
–õ–µ–∫—Å–∏—á–Ω—ñ –æ–∑–Ω–∞–∫–∏ –Ω–µ –∑–¥–∞—Ç–Ω—ñ –≤–ª–æ–≤–∏—Ç–∏ —Å–µ–º–∞–Ω—Ç–∏–∫—É –∑–∞–ø–∏—Ç–∞–Ω—å.

---

### üîπ Feature-engineered –º–æ–¥–µ–ª—ñ

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –æ–∑–Ω–∞–∫–∏:**
- cosine similarity –º—ñ–∂ TF-IDF –≤–µ–∫—Ç–æ—Ä–∞–º–∏
- –¥–æ–≤–∂–∏–Ω–∏ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
- —Ä—ñ–∑–Ω–∏—Ü—è –¥–æ–≤–∂–∏–Ω

**–ú–æ–¥–µ–ª—ñ:**
- XGBoost
- LightGBM

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
–ö—Ä–∞—â—ñ –∑–∞ baseline, –∞–ª–µ –≤—Å–µ —â–µ –æ–±–º–µ–∂–µ–Ω—ñ —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –≥–ª–∏–±–æ–∫–æ–≥–æ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è.

---

##  –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ (SBERT + Qdrant)

–î–ª—è –ø–æ–¥–æ–ª–∞–Ω–Ω—è –æ–±–º–µ–∂–µ–Ω—å –∫–ª–∞—Å–∏—á–Ω–∏—Ö ML-–ø—ñ–¥—Ö–æ–¥—ñ–≤ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ **dense semantic search**:

- **–ú–æ–¥–µ–ª—å:** `sentence-transformers/all-MiniLM-L6-v2`
- **–†–æ–∑–º—ñ—Ä –≤–µ–∫—Ç–æ—Ä–∞:** 384
- **Vector DB:** Qdrant
- **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤:** 453 366
- **–ú–µ—Ç—Ä–∏–∫–∞:** cosine similarity

**Payload —É Qdrant:**
- `title`
- `source_id`

---

##  –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É (—Ä–µ–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)

### –ó–∞–ø–∏—Ç
```text
How to create friendly URL in php?
```
### Top-5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

```text
01. score=1.0000 | source_id=t_c26f16d1e26f282f
    How to create friendly URL in php?

02. score=0.8154 | source_id=t_48c7aef74d9d4496
    SEO friendly url using php

03. score=0.7842 | source_id=t_3b82b13e250b34e5
    php : SEO friendly urls

04. score=0.7568 | source_id=t_837a4163a03b54ad
    clean url using php

05. score=0.7554 | source_id=t_37a5da5e576cb374
    Please I want to Restructure this php URL to SEO friendly URL
```
---

#### –Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è
- **–¢–æ—á–Ω–∏–π –¥—É–±–ª—ñ–∫–∞—Ç** –∑–Ω–∞–π–¥–µ–Ω–æ –∑ `score = 1.00`
- –Ü–Ω—à—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ ‚Äî **—Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω—ñ —Ñ–æ—Ä–º—É–ª—é–≤–∞–Ω–Ω—è**
- –ú–æ–¥–µ–ª—å —Ä–æ–∑—É–º—ñ—î **–Ω–∞–º—ñ—Ä**, –∞ –Ω–µ –ª–∏—à–µ –±—É–∫–≤–∞–ª—å–Ω–∏–π –∑–±—ñ–≥ —Å–ª—ñ–≤

---

##  CLI-–¥–µ–º–æ

```bash
python scripts/search_titles.py \
  --query "How to create friendly URL in php?" \
  --limit 5
```
**–°–∫—Ä–∏–ø—Ç –≤–∏–∫–æ–Ω—É—î:**
- –µ–º–±–µ–¥–¥–∏–Ω–≥ –∑–∞–ø–∏—Ç—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **SBERT**
- **vector search** —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö **Qdrant**
- –≤–∏–≤—ñ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤: `score`, `source_id`, `title`

---

##  –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏

–ü—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º **–º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–Ω–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É**:

- **API Gateway (FastAPI)** ‚Äî `/search`, `/duplicate/predict`
- **Embedder Service** ‚Äî SBERT / OpenAI embeddings
- **Classifier Service** ‚Äî TF-IDF –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- **Qdrant** ‚Äî –≤–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö

 **–î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ö–µ–º–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏:**
```text
docs/architecture.mmd
```
##  –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

### 1. –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
```bash
git clone <repo-url>
cd stack_overflow_duplicate_search
```
### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å–∏
```bash
docker-compose up --build
```
### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –¥–µ–º–æ –ø–æ—à—É–∫—É
```bash
python scripts/search_titles.py \
  --query "How to create friendly URL in php?"
```
---

## –û—Å–Ω–æ–≤–Ω—ñ –≤–∏—Å–Ω–æ–≤–∫–∏
–ö–ª–∞—Å–∏—á–Ω—ñ ML-–º–æ–¥–µ–ª—ñ –æ–±–º–µ–∂–µ–Ω—ñ —É –∑–∞–¥–∞—á–∞—Ö —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ—ó —Å—Ö–æ–∂–æ—Å—Ç—ñ.

Dense embeddings + vector search –¥–µ–º–æ–Ω—Å—Ç—Ä—É—é—Ç—å –∑–Ω–∞—á–Ω–æ –∫—Ä–∞—â—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏.

–ü—Ä–æ—î–∫—Ç –ø–æ–∫—Ä–∏–≤–∞—î –ø–æ–≤–Ω–∏–π ML-pipeline:

- EDA

- supervised learning

- embeddings

- vector databases

- system design

–¶–µ —Ä—ñ—à–µ–Ω–Ω—è –±–ª–∏–∑—å–∫–µ –¥–æ —Ä–µ–∞–ª—å–Ω–∏—Ö —Å–∏—Å—Ç–µ–º –ø–æ—à—É–∫—É –∑–Ω–∞–Ω—å —ñ –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—ó.

---

### –ü—Ä–∏–º—ñ—Ç–∫–∞
–ü—Ä–æ—î–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ —è–∫ portfolio-ready ML-—Ä—ñ—à–µ–Ω–Ω—è –∑ –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–µ –ª–∏—à–µ –Ω–∞ –º–æ–¥–µ–ª—ñ, –∞ –π –Ω–∞ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å, —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—é —Ç–∞ —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥.

---

## A–≤—Ç–æ—Ä
–í–µ—Ä–æ–Ω—ñ–∫–∞ –ü–∞—Å—ñ—á–Ω–∏–∫
